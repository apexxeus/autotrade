-- Inventory Counter Script for Brainrots (Attribute-Based, with GUI - Larger Text, Totals, Revised Scales, Maximize Button, Nearest Scale for Unknown)
-- Run in executor after injecting.

local player = game:GetService("Players").LocalPlayer
local backpack = player.Backpack

-- Scale categories with midpoints for nearest assignment (Updated: Removed Titan, adjusted ranges)
local scaleData = {
    {name = "Baby", min = 0, max = 0.2, mid = 0.1},
    {name = "Mini", min = 0.3, max = 0.7, mid = 0.5},
    {name = "Normal", min = 0.8, max = 1.2, mid = 1.0},
    {name = "Big", min = 1.3, max = 1.7, mid = 1.5},
    {name = "Colossal", min = 1.8, max = 3.0, mid = 2.4}
}

local function getScaleCategory(scale)
    -- Check if scale fits in a range
    for _, data in ipairs(scaleData) do
        if scale >= data.min and scale <= data.max then
            return data.name
        end
    end
    
    -- If not, find the nearest by distance to midpoints
    local nearest = "Baby"
    local minDistance = math.abs(scale - scaleData[1].mid)
    for _, data in ipairs(scaleData) do
        local distance = math.abs(scale - data.mid)
        if distance < minDistance then
            minDistance = distance
            nearest = data.name
        end
    end
    return nearest
end

-- Data structure: brainrotData[brainrotName][mutation][scaleCategory] = count
local brainrotData = {}

-- Scan backpack for brainrots
for _, item in pairs(backpack:GetChildren()) do
    if item:IsA("Tool") then
        local brainrotName = item:GetAttribute("BrainrotName")
        local mutation = item:GetAttribute("Mutation")
        local scale = item:GetAttribute("Scale")
        
        if brainrotName and mutation and scale then
            local scaleCategory = getScaleCategory(scale)
            
            -- Initialize tables if needed
            if not brainrotData[brainrotName] then
                brainrotData[brainrotName] = {}
            end
            if not brainrotData[brainrotName][mutation] then
                brainrotData[brainrotName][mutation] = {
                    Baby = 0, Mini = 0, Normal = 0, Big = 0, Colossal = 0  -- Removed Titan
                }
            end
            
            -- Increment count
            brainrotData[brainrotName][mutation][scaleCategory] = brainrotData[brainrotName][mutation][scaleCategory] + 1
        end
    end
end

-- GUI Setup
local screenGui = Instance.new("ScreenGui")
screenGui.Name = "InventoryCounterGUI"
screenGui.Parent = player.PlayerGui

local mainFrame = Instance.new("Frame")
mainFrame.Size = UDim2.new(0, 400, 0, 300)  -- Original size
mainFrame.Position = UDim2.new(0.5, -200, 0.5, -150)  -- Center of screen
mainFrame.BackgroundColor3 = Color3.fromRGB(30, 30, 30)
mainFrame.BorderSizePixel = 2
mainFrame.Active = true
mainFrame.Draggable = true
mainFrame.Parent = screenGui

-- Store original sizes for toggling
local originalSize = UDim2.new(0, 400, 0, 300)
local maximizedSize = UDim2.new(0, 650, 0, 450)  -- Slightly bigger
local isMaximized = false

local title = Instance.new("TextLabel")
title.Size = UDim2.new(1, 0, 0, 25)  -- Smaller height
title.Text = "Brainrot Inventory Counter"
title.BackgroundColor3 = Color3.fromRGB(50, 50, 50)
title.TextColor3 = Color3.fromRGB(255, 255, 255)
title.Font = Enum.Font.SourceSansBold
title.TextScaled = true
title.TextSize = 16  -- Smaller size
title.Parent = mainFrame

local subtitle = Instance.new("TextLabel")
subtitle.Size = UDim2.new(1, 0, 0, 20)
subtitle.Position = UDim2.new(0, 0, 0, 25)  -- Below title
subtitle.Text = "Made by Apexx"
subtitle.BackgroundTransparency = 1
subtitle.TextColor3 = Color3.fromRGB(200, 200, 200)
subtitle.Font = Enum.Font.SourceSans
subtitle.TextScaled = true
subtitle.TextSize = 12
subtitle.TextXAlignment = Enum.TextXAlignment.Center
subtitle.Parent = mainFrame

local exitButton = Instance.new("TextButton")
exitButton.Size = UDim2.new(0, 35, 0, 35)  -- Slightly larger
exitButton.Position = UDim2.new(1, -35, 0, 0)
exitButton.Text = "X"
exitButton.BackgroundColor3 = Color3.fromRGB(255, 0, 0)
exitButton.TextColor3 = Color3.fromRGB(255, 255, 255)
exitButton.Font = Enum.Font.SourceSansBold
exitButton.TextScaled = true
exitButton.TextSize = 16
exitButton.Parent = mainFrame

local maximizeButton = Instance.new("TextButton")
maximizeButton.Size = UDim2.new(0, 35, 0, 35)
maximizeButton.Position = UDim2.new(1, -70, 0, 0)  -- Beside exit button
maximizeButton.Text = "Max"
maximizeButton.BackgroundColor3 = Color3.fromRGB(0, 255, 0)
maximizeButton.TextColor3 = Color3.fromRGB(0, 0, 0)
maximizeButton.Font = Enum.Font.SourceSansBold
maximizeButton.TextScaled = true
maximizeButton.TextSize = 14
maximizeButton.Parent = mainFrame

local scrollFrame = Instance.new("ScrollingFrame")
scrollFrame.Size = UDim2.new(1, -10, 1, -50)  -- Adjusted for smaller title and subtitle
scrollFrame.Position = UDim2.new(0, 5, 0, 45)  -- Moved down
scrollFrame.BackgroundTransparency = 1
scrollFrame.ScrollBarThickness = 10
scrollFrame.CanvasSize = UDim2.new(0, 0, 0, 0)  -- Will adjust dynamically
scrollFrame.Parent = mainFrame

-- Populate GUI with data
local yOffset = 0
for brainrotName, mutations in pairs(brainrotData) do
    -- Calculate total for this brainrot
    local totalCount = 0
    for _, scales in pairs(mutations) do
        for _, count in pairs(scales) do
            totalCount = totalCount + count
        end
    end
    
    -- Brainrot Name Label
    local nameLabel = Instance.new("TextLabel")
    nameLabel.Size = UDim2.new(1, 0, 0, 30)  -- Increased height
    nameLabel.Position = UDim2.new(0, 0, 0, yOffset)
    nameLabel.Text = brainrotName
    nameLabel.BackgroundTransparency = 1
    nameLabel.TextColor3 = Color3.fromRGB(255, 255, 0)
    nameLabel.Font = Enum.Font.SourceSansBold
    nameLabel.TextScaled = true
    nameLabel.TextSize = 16  -- Fixed size
    nameLabel.TextXAlignment = Enum.TextXAlignment.Left
    nameLabel.Parent = scrollFrame
    yOffset = yOffset + 35
    
    -- Total Count Label
    local totalLabel = Instance.new("TextLabel")
    totalLabel.Size = UDim2.new(1, 0, 0, 25)
    totalLabel.Position = UDim2.new(0, 10, 0, yOffset)
    totalLabel.Text = "Total: " .. totalCount
    totalLabel.BackgroundTransparency = 1
    totalLabel.TextColor3 = Color3.fromRGB(255, 0, 255)  -- Distinct color for total
    totalLabel.Font = Enum.Font.SourceSansBold
    totalLabel.TextScaled = true
    totalLabel.TextSize = 15
    totalLabel.TextXAlignment = Enum.TextXAlignment.Left
    totalLabel.Parent = scrollFrame
    yOffset = yOffset + 30
    
    for mutation, scales in pairs(mutations) do
        -- Mutation Label
        local mutationLabel = Instance.new("TextLabel")
        mutationLabel.Size = UDim2.new(1, 0, 0, 25)  -- Increased height
        mutationLabel.Position = UDim2.new(0, 10, 0, yOffset)
        mutationLabel.Text = mutation .. " Mutation"
        mutationLabel.BackgroundTransparency = 1
        mutationLabel.TextColor3 = Color3.fromRGB(0, 255, 255)
        mutationLabel.Font = Enum.Font.SourceSans
        mutationLabel.TextScaled = true
        mutationLabel.TextSize = 15  -- Fixed size
        mutationLabel.TextXAlignment = Enum.TextXAlignment.Left
        mutationLabel.Parent = scrollFrame
        yOffset = yOffset + 30
        
        -- Scale Counts
        for category, count in pairs(scales) do
            if count > 0 then
                local scaleLabel = Instance.new("TextLabel")
                scaleLabel.Size = UDim2.new(1, 0, 0, 25)  -- Increased height
                scaleLabel.Position = UDim2.new(0, 20, 0, yOffset)
                scaleLabel.Text = category .. " = " .. count
                scaleLabel.BackgroundTransparency = 1
                scaleLabel.TextColor3 = Color3.fromRGB(255, 255, 255)
                scaleLabel.Font = Enum.Font.SourceSans
                scaleLabel.TextScaled = true
                scaleLabel.TextSize = 14  -- Fixed size
                scaleLabel.TextXAlignment = Enum.TextXAlignment.Left
                scaleLabel.Parent = scrollFrame
                yOffset = yOffset + 25
            end
        end
    end
    yOffset = yOffset + 10  -- Space between brainrots
end

-- Adjust CanvasSize
scrollFrame.CanvasSize = UDim2.new(0, 0, 0, yOffset)

-- Maximize Button Functionality
maximizeButton.MouseButton1Click:Connect(function()
    isMaximized = not isMaximized
    if isMaximized then
        mainFrame.Size = maximizedSize
        maximizeButton.Text = "Min"
    else
        mainFrame.Size = originalSize
        maximizeButton.Text = "Max"
    end
end)

-- Exit Button Functionality
exitButton.MouseButton1Click:Connect(function()
    screenGui:Destroy()
    print("Inventory Counter GUI closed.")
end)

print("Inventory Counter GUI loaded with unknown scales assigned to nearest category. Check your screen for the counter.")
